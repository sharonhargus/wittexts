(function(e,k){var m=e.document,g=e.location,n=/:\/\//,l=g.href.replace(g.href.split("/").slice(-1)[0],""),r=function(a,f,b){a=a||0;f=(f||a||0)+1;b=b||1;f=Math.ceil((f-a)/b)||0;var o=0,c=[];for(c.length=f;o<f;){c[o++]=a;a+=b}return c};k.sequence=function(a,f){return new k.sequence.init(a,f)};k.sequence.init=function(a,f){this.parent=m.getElementById(a);this.seqId=k.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var b=this,o=0;k.forEach(f,function(c,i){var h=m.createElement("video");h.preload="auto";h.controls=true;h.style.display=i&&"none"||"";h.id=b.seqId+"-"+i;b.queue.push(h);var j=c["in"],d=c.out;b.inOuts.ofVideos.push({"in":j!==undefined&&j||1,out:d!==undefined&&d||0});b.inOuts.ofVideos[i].out=b.inOuts.ofVideos[i].out||b.inOuts.ofVideos[i]["in"]+2;h.src=!n.test(c.src)?l+c.src:c.src;h.setAttribute("data-sequence-owner",a);h.setAttribute("data-sequence-guid",
b.seqId);h.setAttribute("data-sequence-id",i);h.setAttribute("data-sequence-clip",[b.inOuts.ofVideos[i]["in"],b.inOuts.ofVideos[i].out].join(":"));b.parent.appendChild(h);b.playlist.push(k("#"+h.id))});b.inOuts.ofVideos.forEach(function(c){c={"in":o,out:o+(c.out-c["in"])};b.inOuts.ofClips.push(c);o=c.out+1});k.forEach(this.queue,function(c,i){function h(){if(!i){b.dims.width=c.videoWidth;b.dims.height=c.videoHeight}c.currentTime=b.inOuts.ofVideos[i]["in"]-0.5;c.removeEventListener("canplaythrough",
h,false);return true}c.addEventListener("canplaythrough",h,false);c.addEventListener("play",function(){b.playing=true},false);c.addEventListener("pause",function(){b.playing=false},false);c.addEventListener("timeupdate",function(j){j=j.srcElement||j.target;j=+(j.dataset&&j.dataset.sequenceId||j.getAttribute("data-sequence-id"));var d=Math.floor(c.currentTime);if(b.times.last!==d&&j===b.active){b.times.last=d;d===b.inOuts.ofVideos[j].out&&k.sequence.cycle.call(b,j)}},false)});return this};k.sequence.init.prototype=
k.sequence.prototype;k.sequence.cycle=function(a){this.queue||k.error("Popcorn.sequence.cycle is not a public method");var f=this.queue,b=this.inOuts.ofVideos,o=f[a],c=0,i;if(f[a+1])c=a+1;if(f[a+1]){f=f[c];b=b[c];k.extend(f,{width:this.dims.width,height:this.dims.height});i=this.playlist[c];o.pause();this.active=c;this.times.last=b["in"]-1;i.currentTime(b["in"]);i[c?"play":"pause"]();this.trigger("cycle",{position:{previous:a,current:c}});if(c){o.style.display="none";f.style.display=""}this.cycling=
false}else this.playlist[a].pause();return this};var p=["timeupdate","play","pause"];k.extend(k.sequence.prototype,{eq:function(a){return this.playlist[a]},remove:function(){this.parent.innerHTML=null},clip:function(a){return this.inOuts.ofVideos[a]},duration:function(){for(var a=0,f=this.inOuts.ofClips,b=0;b<f.length;b++)a+=f[b].out-f[b]["in"]+1;return a-1},play:function(){this.playlist[this.active].play();return this},exec:function(a,f){var b=this.active;this.inOuts.ofClips.forEach(function(o,c){if(a>=
o["in"]&&a<=o.out)b=c});a+=this.inOuts.ofVideos[b]["in"]-this.inOuts.ofClips[b]["in"];k.addTrackEvent(this.playlist[b],{start:a-1,end:a,_running:false,_natives:{start:f||k.nop,end:k.nop,type:"exec"}});return this},listen:function(a,f){var b=this,o=this.playlist,c=o.length,i=0;if(!f)f=k.nop;if(k.Events.Natives.indexOf(a)>-1)k.forEach(o,function(h){h.listen(a,function(j){j.active=b;if(p.indexOf(a)>-1)f.call(h,j);else++i===c&&f.call(h,j)})});else{this.events[a]||(this.events[a]={});o=f.name||k.guid("__"+
a);this.events[a][o]=f}return this},unlisten:function(){},trigger:function(a,f){var b=this;if(!(k.Events.Natives.indexOf(a)>-1)){this.events[a]&&k.forEach(this.events[a],function(o){o.call(b,{type:a},f)});return this}}});k.forEach(k.manifest,function(a,f){k.sequence.prototype[f]=function(b){var o={},c=[],i,h,j,d,s;for(i=0;i<this.inOuts.ofClips.length;i++){c=this.inOuts.ofClips[i];h=r(c["in"],c.out);j=h.indexOf(b.start);d=h.indexOf(b.end);if(j>-1)o[i]=k.extend({},c,{start:h[j],clipIdx:j});if(d>-1)o[i]=
k.extend({},c,{end:h[d],clipIdx:d})}i=Object.keys(o).map(function(q){return+q});c=r(i[0],i[1]);for(i=0;i<c.length;i++){j={};d=c[i];var v=o[d];if(v){s=this.inOuts.ofVideos[d];h=v.clipIdx;s=r(s["in"],s.out);if(v.start){j.start=s[h];j.end=s[s.length-1]}if(v.end){j.start=s[0];j.end=s[h]}}else{j.start=this.inOuts.ofVideos[d]["in"];j.end=this.inOuts.ofVideos[d].out}this.playlist[d][f](k.extend({},b,j))}return this}})})(this,Popcorn);(function(e,k){function m(l){l=typeof l==="string"?l:[l.language,l.region].join("-");var r=l.split("-");return{iso6391:l,language:r[0]||"",region:r[1]||""}}var g=e.navigator,n=m(g.userLanguage||g.language);k.locale={get:function(){return n},set:function(l){n=m(l);k.locale.broadcast();return n},broadcast:function(l){var r=k.instances,p=r.length,a=0,f;for(l=l||"locale:changed";a<p;a++){f=r[a];l in f.data.events&&f.trigger(l)}}}})(this,this.Popcorn);(function(e){document.addEventListener("DOMContentLoaded",function(){var k=document.querySelectorAll("[data-timeline-sources]");e.forEach(k,function(m,g){var n=k[g],l,r,p;if(!n.id)n.id=e.guid("__popcorn");if(n.nodeType&&n.nodeType===1){p=e("#"+n.id);l=(n.getAttribute("data-timeline-sources")||"").split(",");l[0]&&e.forEach(l,function(a){r=a.split("!");if(r.length===1){r=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");r[0]="parse"+r[1].toUpperCase();r[1]=a}l[0]&&p[r[0]]&&p[r[0]](r[1])});p.autoplay()&&
p.play()}})},false)})(Popcorn);(function(e){var k=function(m,g){m=m||e.nop;g=g||e.nop;return function(){m.apply(this,arguments);g.apply(this,arguments)}};e.player=function(m,g){if(!e[m]){g=g||{};var n=function(l,r,p){p=p||{};var a=new Date/1E3,f=a,b=0,o=0,c=1,i=false,h={},j=typeof l==="string"?e.dom.find(l):l,d={};Object.prototype.__defineGetter__||(d=j||document.createElement("div"));for(var s in j)if(!(s in d))if(typeof j[s]==="object")d[s]=j[s];else if(typeof j[s]==="function")d[s]=function(q){return"length"in j[q]&&!j[q].call?
j[q]:function(){return j[q].apply(j,arguments)}}(s);else e.player.defineProperty(d,s,{get:function(q){return function(){return j[q]}}(s),set:e.nop,configurable:true});var v=function(){a=new Date/1E3;if(!d.paused){d.currentTime+=a-f;d.dispatchEvent("timeupdate");setTimeout(v,10)}f=a};d.play=function(){this.paused=false;if(d.readyState>=4){f=new Date/1E3;d.dispatchEvent("play");v()}};d.pause=function(){this.paused=true;d.dispatchEvent("pause")};e.player.defineProperty(d,"currentTime",{get:function(){return b},
set:function(q){b=+q;d.dispatchEvent("timeupdate");return b},configurable:true});e.player.defineProperty(d,"volume",{get:function(){return c},set:function(q){c=+q;d.dispatchEvent("volumechange");return c},configurable:true});e.player.defineProperty(d,"muted",{get:function(){return i},set:function(q){i=+q;d.dispatchEvent("volumechange");return i},configurable:true});e.player.defineProperty(d,"readyState",{get:function(){return o},set:function(q){return o=q},configurable:true});d.addEventListener=function(q,
u){h[q]||(h[q]=[]);h[q].push(u);return u};d.removeEventListener=function(q,u){var t,w=h[q];if(w){for(t=h[q].length-1;t>=0;t--)u===w[t]&&w.splice(t,1);return u}};d.dispatchEvent=function(q){var u,t=q.type;if(!t){t=q;if(q=e.events.getInterface(t)){u=document.createEvent(q);u.initEvent(t,true,true,window,1)}}if(h[t])for(q=h[t].length-1;q>=0;q--)h[t][q].call(this,u,this)};d.src=r||"";d.duration=0;d.paused=true;d.ended=0;p&&p.events&&e.forEach(p.events,function(q,u){d.addEventListener(u,q,false)});if(g._canPlayType(j.nodeName,
r)!==false)if(g._setup)g._setup.call(d,p);else{d.readyState=4;d.dispatchEvent("loadedmetadata");d.dispatchEvent("loadeddata");d.dispatchEvent("canplaythrough")}else setTimeout(function(){d.dispatchEvent("error")},0);l=new e.p.init(d,p);if(g._teardown)l.destroy=k(l.destroy,function(){g._teardown.call(d,p)});return l};n.canPlayType=g._canPlayType=g._canPlayType||e.nop;e[m]=e.player.registry[m]=n}};e.player.registry={};e.player.defineProperty=Object.defineProperty||function(m,g,n){m.__defineGetter__(g,
n.get||e.nop);m.__defineSetter__(g,n.set||e.nop)};e.player.playerQueue=function(){var m=[],g=false;return{next:function(){g=false;m.shift();m[0]&&m[0]()},add:function(n){m.push(function(){g=true;n&&n()});!g&&m[0]()}}};e.smart=function(m,g,n){var l=typeof m==="string"?e.dom.find(m):m,r,p,a,f,b,o="HTMLYouTubeVideoElement HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(l){g=typeof g==="string"?[g]:g;m=0;for(b=g.length;m<b;m++){r=g[m];for(p=0;p<o.length;p++)if((f=
e[o[p]])&&f._canPlaySrc(r)==="probably"){a=f(l);n=e(a,n);setTimeout(function(){a.src=r},0);return n}for(var c in e.player.registry)if(e.player.registry.hasOwnProperty(c))if(e.player.registry[c].canPlayType(l.nodeName,r))return e[c](l,r,n)}var i;c=e.guid("popcorn-video-");p=document.createElement("div");p.style.width="100%";p.style.height="100%";if(g.length===1){i=document.createElement("video");i.id=c;l.appendChild(i);setTimeout(function(){var h=document.createElement("div");h.innerHTML=g[0];i.src=
h.firstChild.nodeValue},0);return e("#"+c,n)}l.appendChild(p);o='<video id="'+c+'" preload=auto autobuffer>';m=0;for(b=g.length;m<b;m++)o+='<source src="'+g[m]+'">';o+="</video>";p.innerHTML=o;n&&n.events&&n.events.error&&l.addEventListener("error",n.events.error,false);return e("#"+c,n)}else e.error("Specified target `"+m+"` was not found.")}})(Popcorn);(function(e){var k=Object.prototype.hasOwnProperty;e.parsers={};e.parser=function(m,g,n){if(e.protect.natives.indexOf(m.toLowerCase())>=0)e.error("'"+m+"' is a protected function name");else{if(typeof g==="function"&&!n){n=g;g=""}if(!(typeof n!=="function"||typeof g!=="string")){var l={};l[m]=function(r,p,a){if(!r)return this;if(typeof p!=="function"&&!a){a=p;p=null}var f=this;e.xhr({url:r,dataType:g,success:function(b){var o,c,i=0;b=n(b,a).data||[];if(o=b.length){for(;i<o;i++){c=b[i];for(var h in c)k.call(c,
h)&&f[h]&&f[h](c[h])}p&&p()}}});return this};e.extend(e.p,l);return l}}}})(Popcorn);
